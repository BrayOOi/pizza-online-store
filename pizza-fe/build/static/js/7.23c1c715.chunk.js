(this["webpackJsonppizza-fe"]=this["webpackJsonppizza-fe"]||[]).push([[7],{118:function(e,t,a){"use strict";a.d(t,"c",(function(){return l})),a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return i}));var n=a(21),r=a(5),l=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null==t?null:"object"==typeof t?Object.keys(t).reduce((function(a,l){return Object(r.a)({},a,Object(n.a)({},l,e(t[l])))}),{}):"boolean"==typeof t?!t:void 0},c=function(e,t,a){return Object(r.a)({},e,Object(n.a)({},t,a))},i=function(e){return function(t){return{name:e,value:t}}}},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){},153:function(e,t,a){"use strict";a.r(t);var n=a(18),r=a.n(n),l=a(0),c=a.n(l),i=a(5),u=a(11),s=a(121),d=a(122),m=a(133),o=function(e){var t=e.listName,a=e.children;return c.a.createElement(s.a,{row:!0},c.a.createElement(d.a,{sm:3},t),c.a.createElement(m.a,{sm:9},a))},p=a(42),f=a(118),O=a(21),g=(a(43),function(e,t,a){return{size:!!e&&{small:!1,large:!1},addOns:!!t&&t.reduce((function(e,t){var a=t.food_name;return Object(i.a)({},e,Object(O.a)({},a,!1))}),{}),style:!!a&&a.reduce((function(e,t){return Object(i.a)({},e,Object(O.a)({},t,!1))}),{})}}),y=a(148),b=a(123),E=a(159),_=function(e){var t=e.item,a=e.mapKey,n=Object(l.useContext)(p.a),r=n.menuState,s=n.menuDispatch,d=n.menuOrder,m=n.menuSettings,O=r.menu,_=r.modal,h=r.order,j=m[d[a]].triggerModal,v=j.size,z=j.addOns,S=j.styles,k=g(v,O[d.indexOf(z)],S);Object(l.useEffect)((function(){var e=Object.keys(_.size).filter((function(e){return _.size[e]})),a=Object(u.a)(e,1)[0];a&&h.item&&s({type:"ORDER_SET_ITEM_PRICE",payload:parseFloat("small"===a?t.small_price:t.large_price)})}),[_.size,h.item]),Object(l.useEffect)((function(){s({type:"ORDER_SET_ADDONS_PRICE",payload:h.addOns.reduce((function(e,t){return e+parseFloat(O[d.indexOf(z)][t].small_price||0)}),0)})}),[h.addOns]),Object(l.useEffect)((function(){var e={cheese:"CZ",special:"SP",1:"1T",2:"2T",3:"3T"},a=h.addOns.length||Object.keys(_.style).filter((function(e){return _.style[e]}))[0],n=O[d.indexOf("Pizza")].filter((function(n){return n.pizza_type===t.pizza_type&&n.pizza_styles===e[a]}))[0];s({type:"ORDER_SET_PIZZA",payload:n?Object(i.a)({},n,{img_url:t.img_url}):h.item})}),[h.addOns,_.style]);var x=function(e){return s({type:"UPDATE_ORDER",payload:Object(f.a)(e.target.name)(Object(f.b)(k.size,e.target.id,!0))})},D=function(e){var t=e.target.getAttribute("data-addons");!e.target.checked||h.addOns.length<("SubsAddition"!==t?3:4)?(s({type:"UPDATE_ORDER",payload:Object(f.a)(e.target.name)(Object(f.b)(_.addOns,e.target.id,e.target.checked))}),s({type:"ORDER_SET_ADDONS",payload:{modal:"Topping"===t?Object(f.b)(_.style,"toppings",!0):_.style,checked:e.target.checked,addOn:e.target.getAttribute("data-key")}})):(e.preventDefault(),e.target.checked=!1,alert("Please only choose 1 to 3 items!"))},C=function(e){return s({type:"PIZZA_SET_STYLE",payload:{style:Object(f.b)(k.style,e.target.id,!0),addOnsDisabled:"toppings"!==e.target.id,addOns:"toppings"===e.target.id?_.addOns:k.addOns,order:"toppings"===e.target.id?h.addOns:[]}})};return c.a.createElement(y.a,null,c.a.createElement(b.a,null,S&&c.a.createElement(o,{listName:"Types"},S.map((function(e){return c.a.createElement(E.a,{type:"radio",id:e,name:"style",key:e,label:e,onChange:C,checked:_.style[e]})}))),v&&c.a.createElement(o,{listName:"Size"},c.a.createElement(E.a,{type:"radio",selected:_.size.small,name:"size",id:"small",label:"Small",disabled:!t.small_price,onChange:x}),c.a.createElement(E.a,{type:"radio",selected:_.size.large,name:"size",id:"large",label:"Large",onChange:x})),O[d.indexOf(z)]&&c.a.createElement(o,{listName:"Add ons"},O[d.indexOf(z)].map((function(e){var t=e.id,a=e.food_name;return c.a.createElement(E.a,{type:"checkbox",id:a,key:a,label:a,name:"addOns","data-addons":z,"data-key":t-1,disabled:_.addOnsDisabled,checked:_.addOns[a],onChange:D})})))))},h=a(27),j=a(157),v=a(149),z=a(150),S=a(57),k=(a(134),function(){var e=Object(l.useContext)(h.a).addItem,t=Object(l.useContext)(p.a),a=t.menuState,n=t.menuDispatch,r=t.menuOrder,i=t.menuSettings,u=a.menu,s=a.order,d=a.modal,m=d.isToggled,o=s.item,f=s.mapKey,O=s.totalPrice,g=function(){return n({type:"TOGGLE_MODAL"})};if(o){var y=o.food_name;return c.a.createElement(j.a,{isOpen:m,toggle:g,className:"menu-modal"},c.a.createElement(v.a,{toggle:g},y),c.a.createElement(_,{item:o,mapKey:f}),c.a.createElement(z.a,null,0===O?null:c.a.createElement("span",null,"$ "+O.toFixed(2)),c.a.createElement(S.a,{className:"modal-button",onClick:function(){var t=u[r.indexOf(i[r[f]].triggerModal.addOns)];e({img_url:o.img_url,id:o.id,name:o.food_name,size:Object.keys(d.size).filter((function(e){return d.size[e]}))[0],price:s.totalPrice,itemPrice:s.itemPrice,addOns:s.addOns.map((function(e){return t[e]})),groupId:r[f]}),g()},disabled:0===O},"Yes I want this!")))}return null}),x=a(126),D=a(127),C=a(151),T=a(128),R=a(129),N=(a(135),function(e){var t=e.menuItem,a=e.mapKey,n=Object(l.useContext)(h.a).addItem,r=Object(l.useContext)(p.a),i=r.menuState.menu,u=r.menuDispatch,s=r.menuOrder,d=r.menuSettings,m=t.img_url,o=t.id,f=t.food_name,O=t.price,y=t.small_price,b=t.large_price,E=d[s[a]],_=E.triggerModal,j=E.disabled,v=_.size,z=_.styles,k=_.addOns,N=k&&i[s.indexOf(k)],I=O||y||b;return c.a.createElement(x.a,{className:"menu-item mb-3"},c.a.createElement(D.a,{top:!0,src:m||"300x200.svg",alt:"Card image cap",className:"menu-item-image"}),c.a.createElement(C.a,null,c.a.createElement(T.a,{className:"menu-item-text"},c.a.createElement("p",{style:O||I?null:{margin:"auto"}},f),I&&c.a.createElement("p",null,O||I+"+")),c.a.createElement(R.a,null,j||c.a.createElement(S.a,{className:"menu-item-purchase",onClick:function(){u({type:"ORDER_START",payload:{modal:{isToggled:!!_,orderDefaults:g(v,N,z)},order:{item:t,mapKey:a}}}),_||n({img_url:m,id:o,name:f,price:O,groupId:s[a]})}},"Add to cart"))))}),I=a(131),P=function(e){var t=e.menuCollection,a=e.mapKey,n=Object(l.useContext)(p.a),r=n.menuOrder,i=n.menuSettings[r[a]],u=i.name,s=i.display,d=i.replaceWith||t;return s?c.a.createElement("section",null,c.a.createElement("p",{className:"mb-2 h4 text-muted"},u),c.a.createElement(I.a,{className:"mb-4"},d.map((function(e){return c.a.createElement(N,{menuItem:e,key:e.id,mapKey:a})})))):null},A=a(44);a(136),t.default=function(){var e=Object(l.useContext)(p.a),t=e.menuState,a=(e.menuDispatch,e.menuOrder,t.menu);return Object(l.useEffect)((function(){r.a.async((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,r.a.awrap(JSON.parse(window.localStorage.getItem("menu"))||fetch("/api/menu").then((function(e){return[e,e.clone()]})).then((function(e){return Promise.all([e[0].json(),e[1].text()])})).then((function(e){return window.localStorage.setItem("menu",e[1]),e[0]})));case 3:e.next=8;break;case 5:e.prev=5,e.t0=e.catch(0),console.log(e.t0);case 8:case"end":return e.stop()}}),null,null,[[0,5]])}),[]),c.a.createElement("main",{className:"menu-page"},(null===a||void 0===a?void 0:a.map((function(e,t){return c.a.createElement(P,{menuCollection:e,key:t,mapKey:t})})))||c.a.createElement(A.a,null),c.a.createElement(k,null))}}}]);
//# sourceMappingURL=7.23c1c715.chunk.js.map