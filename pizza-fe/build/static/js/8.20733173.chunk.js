(this["webpackJsonppizza-fe"]=this["webpackJsonppizza-fe"]||[]).push([[8],{142:function(e,t,a){},143:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var a=arguments[t];for(var n in a)Object.prototype.hasOwnProperty.call(a,n)&&(e[n]=a[n])}return e},o=function(){function e(e,t){for(var a=0;a<t.length;a++){var n=t[a];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,a,n){return a&&e(t.prototype,a),n&&e(t,n),t}}(),r=l(a(0)),i=l(a(1));function l(e){return e&&e.__esModule?e:{default:e}}function s(e,t,a){return t in e?Object.defineProperty(e,t,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[t]=a,e}var c=!1,d=!1,u=!1,p=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var a=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return a.onScriptLoaded=function(){t.stripeHandler||(t.stripeHandler=StripeCheckout.configure({key:a.props.stripeKey}),a.hasPendingClick&&a.showStripeDialog())},a.onScriptError=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.hideLoadingDialog(),a.props.onScriptError&&a.props.onScriptError.apply(a,t)},a.onClosed=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a._isMounted&&a.setState({open:!1}),a.props.closed&&a.props.closed.apply(a,t)},a.onOpened=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];a.setState({open:!0}),a.props.opened&&a.props.opened.apply(a,t)},a.getConfig=function(){return["token","image","name","description","amount","locale","currency","panelLabel","zipCode","shippingAddress","billingAddress","email","allowRememberMe","bitcoin","alipay","alipayReusable"].reduce((function(e,t){return n({},e,a.props.hasOwnProperty(t)&&s({},t,a.props[t]))}),{opened:a.onOpened,closed:a.onClosed})},a.onClick=function(){if(!a.props.disabled)if(u)try{throw new Error("Tried to call onClick, but StripeCheckout failed to load")}catch(e){}else t.stripeHandler?a.showStripeDialog():(a.showLoadingDialog(),a.hasPendingClick=!0)},a.handleOnMouseDown=function(){a.setState({buttonActive:!0})},a.handleOnMouseUp=function(){a.setState({buttonActive:!1})},a.state={open:!1,buttonActive:!1},a}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),o(t,[{key:"componentDidMount",value:function(){var e=this;if(this._isMounted=!0,!d&&!c){c=!0;var t=document.createElement("script");"function"===typeof this.props.onScriptTagCreated&&this.props.onScriptTagCreated(t),t.src="https://checkout.stripe.com/checkout.js",t.async=1,this.loadPromise=function(){var a=!1,n=new Promise((function(a,n){t.onload=function(){d=!0,c=!1,a(),e.onScriptLoaded()},t.onerror=function(t){u=!0,c=!1,n(t),e.onScriptError(t)}}));return{promise:new Promise((function(e,t){n.then((function(){return a?t({isCanceled:!0}):e()})),n.catch((function(e){return t(a?{isCanceled:!0}:e)}))})),cancel:function(){a=!0}}}(),this.loadPromise.promise.then(this.onScriptLoaded).catch(this.onScriptError),document.body.appendChild(t)}}},{key:"componentDidUpdate",value:function(){c||this.updateStripeHandler()}},{key:"componentWillUnmount",value:function(){this._isMounted=!1,this.loadPromise&&this.loadPromise.cancel(),t.stripeHandler&&this.state.open&&t.stripeHandler.close()}},{key:"updateStripeHandler",value:function(){t.stripeHandler&&!this.props.reconfigureOnUpdate||(t.stripeHandler=StripeCheckout.configure({key:this.props.stripeKey}))}},{key:"showLoadingDialog",value:function(){if(this.props.showLoadingDialog){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];this.props.showLoadingDialog.apply(this,t)}}},{key:"hideLoadingDialog",value:function(){if(this.props.hideLoadingDialog){for(var e=arguments.length,t=Array(e),a=0;a<e;a++)t[a]=arguments[a];this.props.hideLoadingDialog.apply(this,t)}}},{key:"showStripeDialog",value:function(){this.hideLoadingDialog(),t.stripeHandler.open(this.getConfig())}},{key:"renderDefaultStripeButton",value:function(){return r.default.createElement("button",n({},s({},this.props.triggerEvent,this.onClick),{className:this.props.className,onMouseDown:this.handleOnMouseDown,onFocus:this.handleOnMouseDown,onMouseUp:this.handleOnMouseUp,onMouseOut:this.handleOnMouseUp,onBlur:this.handleOnMouseUp,style:n({},{overflow:"hidden",display:"inline-block",background:"linear-gradient(#28a0e5,#015e94)",border:0,padding:1,textDecoration:"none",borderRadius:5,boxShadow:"0 1px 0 rgba(0,0,0,0.2)",cursor:"pointer",visibility:"visible",userSelect:"none"},this.state.buttonActive&&{background:"#005d93"},this.props.style)}),r.default.createElement("span",{style:n({},{backgroundImage:"linear-gradient(#7dc5ee,#008cdd 85%,#30a2e4)",fontFamily:'"Helvetica Neue",Helvetica,Arial,sans-serif',fontSize:14,position:"relative",padding:"0 12px",display:"block",height:30,lineHeight:"30px",color:"#fff",fontWeight:"bold",boxShadow:"inset 0 1px 0 rgba(255,255,255,0.25)",textShadow:"0 -1px 0 rgba(0,0,0,0.25)",borderRadius:4},this.state.buttonActive&&{color:"#eee",boxShadow:"inset 0 1px 0 rgba(0,0,0,0.1)",backgroundImage:"linear-gradient(#008cdd,#008cdd 85%,#239adf)"},this.props.textStyle)},this.props.label))}},{key:"renderDisabledButton",value:function(){return r.default.createElement("button",{disabled:!0,style:{background:"rgba(0,0,0,0.2)",overflow:"hidden",display:"inline-block",border:0,padding:1,textDecoration:"none",borderRadius:5,userSelect:"none"}},r.default.createElement("span",{style:{boxShadow:"inset 0 1px 0 rgba(255,255,255,0.25)",fontFamily:'"Helvetica Neue",Helvetica,Arial,sans-serif',fontSize:14,position:"relative",padding:"0 12px",display:"block",height:30,lineHeight:"30px",borderRadius:4,color:"#999",background:"#f8f9fa",textShadow:"0 1px 0 rgba(255,255,255,0.5)"}},this.props.label))}},{key:"render",value:function(){!0!==this.props.desktopShowModal||this.state.open?!1===this.props.desktopShowModal&&this.state.open&&t.stripeHandler.close():this.onClick();var e=this.props.ComponentClass;return this.props.children?r.default.createElement(e,n({},s({},this.props.triggerEvent,this.onClick),{children:this.props.children})):this.props.disabled?this.renderDisabledButton():this.renderDefaultStripeButton()}}]),t}(r.default.Component);p.defaultProps={className:"StripeCheckout",label:"Pay With Card",locale:"auto",ComponentClass:"span",reconfigureOnUpdate:!1,triggerEvent:"onClick"},p.propTypes={desktopShowModal:i.default.bool,triggerEvent:i.default.oneOf(["onClick","onTouchTap","onTouchStart"]),label:i.default.string,style:i.default.object,textStyle:i.default.object,disabled:i.default.bool,ComponentClass:i.default.string,showLoadingDialog:i.default.func,hideLoadingDialog:i.default.func,onScriptError:i.default.func,onScriptTagCreated:i.default.func,reconfigureOnUpdate:i.default.bool,stripeKey:i.default.string.isRequired,token:i.default.func.isRequired,name:i.default.string,description:i.default.string,image:i.default.string,amount:i.default.number,locale:i.default.oneOf(["auto","zh","da","nl","en","fr","de","it","ja","no","es","sv"]),currency:i.default.oneOf(["AED","AFN","ALL","AMD","ANG","AOA","ARS","AUD","AWG","AZN","BAM","BBD","BDT","BGN","BIF","BMD","BND","BOB","BRL","BSD","BWP","BZD","CAD","CDF","CHF","CLP","CNY","COP","CRC","CVE","CZK","DJF","DKK","DOP","DZD","EEK","EGP","ETB","EUR","FJD","FKP","GBP","GEL","GIP","GMD","GNF","GTQ","GYD","HKD","HNL","HRK","HTG","HUF","IDR","ILS","INR","ISK","JMD","JPY","KES","KGS","KHR","KMF","KRW","KYD","KZT","LAK","LBP","LKR","LRD","LSL","LTL","LVL","MAD","MDL","MGA","MKD","MNT","MOP","MRO","MUR","MVR","MWK","MXN","MYR","MZN","NAD","NGN","NIO","NOK","NPR","NZD","PAB","PEN","PGK","PHP","PKR","PLN","PYG","QAR","RON","RSD","RUB","RWF","SAR","SBD","SCR","SEK","SGD","SHP","SLL","SOS","SRD","STD","SVC","SZL","THB","TJS","TOP","TRY","TTD","TWD","TZS","UAH","UGX","USD","UYU","UZS","VND","VUV","WST","XAF","XCD","XOF","XPF","YER","ZAR","ZMW"]),panelLabel:i.default.string,zipCode:i.default.bool,billingAddress:i.default.bool,shippingAddress:i.default.bool,email:i.default.string,allowRememberMe:i.default.bool,bitcoin:i.default.bool,alipay:i.default.oneOf(["auto",!0,!1]),alipayReusable:i.default.bool,opened:i.default.func,closed:i.default.func},p._isMounted=!1,t.default=p},144:function(e,t,a){},145:function(e,t,a){"use strict";var n=a(3),o=a(4),r=a(0),i=a.n(r),l=a(1),s=a.n(l),c=a(6),d=a.n(c),u=a(2),p={className:s.a.string,cssModule:s.a.object,size:s.a.string,bordered:s.a.bool,borderless:s.a.bool,striped:s.a.bool,dark:s.a.bool,hover:s.a.bool,responsive:s.a.oneOfType([s.a.bool,s.a.string]),tag:u.q,responsiveTag:u.q,innerRef:s.a.oneOfType([s.a.func,s.a.string,s.a.object])},m=function(e){var t=e.className,a=e.cssModule,r=e.size,l=e.bordered,s=e.borderless,c=e.striped,p=e.dark,m=e.hover,f=e.responsive,h=e.tag,g=e.responsiveTag,b=e.innerRef,y=Object(o.a)(e,["className","cssModule","size","bordered","borderless","striped","dark","hover","responsive","tag","responsiveTag","innerRef"]),v=Object(u.m)(d()(t,"table",!!r&&"table-"+r,!!l&&"table-bordered",!!s&&"table-borderless",!!c&&"table-striped",!!p&&"table-dark",!!m&&"table-hover"),a),E=i.a.createElement(h,Object(n.a)({},y,{ref:b,className:v}));if(f){var S=Object(u.m)(!0===f?"table-responsive":"table-responsive-"+f,a);return i.a.createElement(g,{className:S},E)}return E};m.propTypes=p,m.defaultProps={tag:"table",responsiveTag:"div"},t.a=m},155:function(e,t,a){"use strict";a.r(t);var n=a(18),o=a.n(n),r=a(0),i=a.n(r),l=a(15),s=a(14),c=a(27),d=(a(142),function(e){var t=e.cartItem,a=t.name,n=t.img_url,o=t.price,l=t.quantity,s=t.size,d=t.addOns,u=Object(r.useContext)(c.a),p=u.addItem,m=u.removeItem,f=u.clearItemFromCart;return i.a.createElement(i.a.Fragment,null,i.a.createElement("tr",{className:"checkout-item"},i.a.createElement("td",{className:"image"},i.a.createElement("div",{className:"image-container"},i.a.createElement("img",{src:n,alt:"item"}))),i.a.createElement("td",{className:"checkout-item-detail"},a),i.a.createElement("td",{className:"checkout-item-detail size"},s||"-"),i.a.createElement("td",{className:"checkout-item-detail"},i.a.createElement("span",{className:"quantity"},i.a.createElement("div",{className:"arrow",onClick:function(){return m(t)}},"\u276e"),i.a.createElement("span",{className:"value"},l),i.a.createElement("div",{className:"arrow",onClick:function(){return p(t)}},"\u276f"))),i.a.createElement("td",{className:"price checkout-item-detail"},i.a.createElement("span",{id:"itemPrice"},(o*l).toFixed(2))),i.a.createElement("td",{className:"checkout-item-detail"},i.a.createElement("div",{className:"remove-button",onClick:function(){return f(t)}},"\u2715"))),null===d||void 0===d?void 0:d.map((function(e){return i.a.createElement("tr",{className:"checkout-item addOns"},i.a.createElement("td",{className:"image"}),i.a.createElement("td",null,e.food_name),i.a.createElement("td",{className:"size"},"-"),i.a.createElement("td",null,"-"),i.a.createElement("td",null,(e.small_price*l).toFixed(2)||null),i.a.createElement("td",null))})))}),u=a(143),p=a.n(u),m=function(e){var t=e.price,a=e.cartItems,n=Object(l.g)(),o=Object(r.useContext)(c.a).clearCart,s=Math.round(100*t);return i.a.createElement(p.a,{label:"Pay Now",name:"Pinocchio's Pizza & Subs",billingAddress:!1,shippingAddress:!1,description:"Your total is $".concat(t),amount:s,panelLabel:"Pay Now",token:function(e){fetch("/api/payment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({token:e,userToken:window.localStorage.getItem("token"),amount:s,order:a})}).then((function(e){return e.json()})).then((function(e){e?(n.push("/order"),o()):(alert("Something has gone wrong. Please try again later."),n.push("/"))})).catch((function(e){return alert("Something has gone wrong. Please try again later.")}))},stripeKey:"pk_test_5rN11GjkSP6ayB3NaS4l9EUu00vPNVmQXr"})},f=(a(43),a(145));a(144),t.default=function(){var e=Object(l.g)(),t=Object(r.useContext)(c.a),a=t.clearCart,n=t.cartItems,u=t.cartTotal;return n.length?i.a.createElement("main",{className:"checkout-page"},i.a.createElement("div",{className:"checkout-table"},i.a.createElement(f.a,{hover:!0},i.a.createElement("thead",null,i.a.createElement("tr",null,i.a.createElement("th",{className:"image"},"Item"),i.a.createElement("th",null,"Name"),i.a.createElement("th",{className:"size"},"Size"),i.a.createElement("th",null,"Quantity"),i.a.createElement("th",null,"Price"),i.a.createElement("th",null,"Remove"))),i.a.createElement("tbody",null,n.map((function(e){return i.a.createElement(d,{key:e.size?e.size+e.groupId+e.id:e.groupId.toString()+e.id,cartItem:e})}))),i.a.createElement("tfoot",null,i.a.createElement("tr",null,i.a.createElement("td",{className:"image"}),i.a.createElement("td",null),i.a.createElement("td",{className:"size"}),i.a.createElement("td",{className:"text-right"},"TOTAL:"),i.a.createElement("td",{className:"text-center"},u.toFixed(2)),i.a.createElement("td",null,i.a.createElement("div",{className:"checkout-payments"},i.a.createElement(m,{price:u.toFixed(2),cartItems:n}),i.a.createElement("div",{className:"text-muted text-center checkout-pay-later",onClick:function(t){return o.a.async((function(o){for(;;)switch(o.prev=o.next){case 0:t.preventDefault(),fetch("/api/order",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Token ".concat(window.localStorage.getItem("token"))},body:JSON.stringify({userToken:window.localStorage.getItem("token"),amount:u.toFixed(2),order:n})}).then((function(e){return e.json()})).then((function(t){t?(e.push("/order"),a()):(alert("Something has gone wrong. Please try again later."),e.push("/"))})).catch((function(e){return alert("There is a problem with the page. Please try again later.")}));case 2:case"end":return o.stop()}}))}},"or pay later")))))))):i.a.createElement("main",{className:"checkout-page"},i.a.createElement("div",{className:"checkout-no-item"},i.a.createElement("div",{className:"image-container"},i.a.createElement("img",{src:"https://image.flaticon.com/icons/png/512/16/16541.png",alt:"empty-cart"})),i.a.createElement("span",{className:"text-muted text-center"},"You don't seem to have any cart items. Go to ",i.a.createElement(s.b,{to:"/menu"},"our menu")," to begin ordering.")))}}}]);
//# sourceMappingURL=8.20733173.chunk.js.map